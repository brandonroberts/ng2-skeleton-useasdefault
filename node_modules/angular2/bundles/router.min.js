"format register";System.register("angular2/src/router/lifecycle_annotations_impl",["angular2/src/facade/lang"],!0,function(require,e,t){var r=System.global,n=r.define;r.define=void 0;var i=this&&this.__decorate||function(e,t,r,n){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,r,n);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,n){return void(n&&n(t,r))},void 0);case 4:return e.reduceRight(function(e,n){return n&&n(t,r,e)||e},n)}},o=this&&this.__metadata||function(e,t){return"object"==typeof Reflect&&"function"==typeof Reflect.metadata?Reflect.metadata(e,t):void 0},s=require("angular2/src/facade/lang"),a=function(){function e(e){this.name=e}return e=i([s.CONST(),o("design:paramtypes",[String])],e)}();e.RouteLifecycleHook=a;var c=function(){function e(e){this.fn=e}return e=i([s.CONST(),o("design:paramtypes",[Function])],e)}();return e.CanActivate=c,e.canReuse=s.CONST_EXPR(new a("canReuse")),e.canDeactivate=s.CONST_EXPR(new a("canDeactivate")),e.onActivate=s.CONST_EXPR(new a("onActivate")),e.onReuse=s.CONST_EXPR(new a("onReuse")),e.onDeactivate=s.CONST_EXPR(new a("onDeactivate")),r.define=n,t.exports}),System.register("angular2/src/router/instruction",["angular2/src/facade/collection","angular2/src/facade/lang","angular2/src/facade/async"],!0,function(require,e,t){var r=System.global,n=r.define;r.define=void 0;var i=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},o=require("angular2/src/facade/collection"),s=require("angular2/src/facade/lang"),a=require("angular2/src/facade/async"),c=function(){function e(e){this.params=e}return e.prototype.get=function(e){return s.normalizeBlank(o.StringMapWrapper.get(this.params,e))},e}();e.RouteParams=c;var u=function(){function e(e){void 0===e&&(e=s.CONST_EXPR({})),this.data=e}return e.prototype.get=function(e){return s.normalizeBlank(o.StringMapWrapper.get(this.data,e))},e}();e.RouteData=u,e.BLANK_ROUTE_DATA=new u;var l=function(){function e(){this.auxInstruction={}}return Object.defineProperty(e.prototype,"urlPath",{get:function(){return this.component.urlPath},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"urlParams",{get:function(){return this.component.urlParams},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"specificity",{get:function(){var e=0;return s.isPresent(this.component)&&(e+=this.component.specificity),s.isPresent(this.child)&&(e+=this.child.specificity),e},enumerable:!0,configurable:!0}),e.prototype.toRootUrl=function(){return this.toUrlPath()+this.toUrlQuery()},e.prototype._toNonRootUrl=function(){return this._stringifyPathMatrixAuxPrefixed()+(s.isPresent(this.child)?this.child._toNonRootUrl():"")},e.prototype.toUrlQuery=function(){return this.urlParams.length>0?"?"+this.urlParams.join("&"):""},e.prototype.replaceChild=function(e){return new p(this.component,e,this.auxInstruction)},e.prototype.toUrlPath=function(){return this.urlPath+this._stringifyAux()+(s.isPresent(this.child)?this.child._toNonRootUrl():"")},e.prototype.toLinkUrl=function(){return this.urlPath+this._stringifyAux()+(s.isPresent(this.child)?this.child._toLinkUrl():"")},e.prototype._toLinkUrl=function(){return this._stringifyPathMatrixAuxPrefixed()+(s.isPresent(this.child)?this.child._toLinkUrl():"")},e.prototype._stringifyPathMatrixAuxPrefixed=function(){var e=this._stringifyPathMatrixAux();return e.length>0&&(e="/"+e),e},e.prototype._stringifyMatrixParams=function(){return this.urlParams.length>0?";"+this.component.urlParams.join(";"):""},e.prototype._stringifyPathMatrixAux=function(){return s.isBlank(this.component)?"":this.urlPath+this._stringifyMatrixParams()+this._stringifyAux()},e.prototype._stringifyAux=function(){var e=[];return o.StringMapWrapper.forEach(this.auxInstruction,function(t,r){e.push(t._stringifyPathMatrixAux())}),e.length>0?"("+e.join("//")+")":""},e}();e.Instruction=l;var p=function(e){function t(t,r,n){e.call(this),this.component=t,this.child=r,this.auxInstruction=n}return i(t,e),t.prototype.resolveComponent=function(){return a.PromiseWrapper.resolve(this.component)},t}(l);e.ResolvedInstruction=p;var f=function(e){function t(t,r){e.call(this),this.component=t,this.child=r}return i(t,e),t.prototype.resolveComponent=function(){return a.PromiseWrapper.resolve(this.component)},t.prototype.toLinkUrl=function(){return""},t.prototype._toLinkUrl=function(){return""},t}(l);e.DefaultInstruction=f;var d=function(e){function t(t,r,n){void 0===r&&(r=""),void 0===n&&(n=[]),e.call(this),this._resolver=t,this._urlPath=r,this._urlParams=n}return i(t,e),Object.defineProperty(t.prototype,"urlPath",{get:function(){return s.isPresent(this.component)?this.component.urlPath:s.isPresent(this._urlPath)?this._urlPath:""},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"urlParams",{get:function(){return s.isPresent(this.component)?this.component.urlParams:s.isPresent(this._urlParams)?this._urlParams:[]},enumerable:!0,configurable:!0}),t.prototype.resolveComponent=function(){var e=this;return s.isPresent(this.component)?a.PromiseWrapper.resolve(this.component):this._resolver().then(function(t){return e.child=t.child,e.component=t.component})},t}(l);e.UnresolvedInstruction=d;var h=function(e){function t(t,r){e.call(this,t),this.specificity=r}return i(t,e),t}(d);e.UnresolvedRedirectInstruction=h;var g=function(){function t(t,r,n,i,o,a,c){void 0===c&&(c=null),this.urlPath=t,this.urlParams=r,this.componentType=i,this.terminal=o,this.specificity=a,this.params=c,this.reuse=!1,this.routeData=s.isPresent(n)?n:e.BLANK_ROUTE_DATA}return t}();return e.ComponentInstruction=g,r.define=n,t.exports}),System.register("angular2/src/router/lifecycle_annotations",["angular2/src/core/util/decorators","angular2/src/router/lifecycle_annotations_impl","angular2/src/router/lifecycle_annotations_impl"],!0,function(require,e,t){var r=System.global,n=r.define;r.define=void 0;var i=require("angular2/src/core/util/decorators"),o=require("angular2/src/router/lifecycle_annotations_impl"),s=require("angular2/src/router/lifecycle_annotations_impl");return e.canReuse=s.canReuse,e.canDeactivate=s.canDeactivate,e.onActivate=s.onActivate,e.onReuse=s.onReuse,e.onDeactivate=s.onDeactivate,e.CanActivate=i.makeDecorator(o.CanActivate),r.define=n,t.exports}),System.register("angular2/src/router/location_strategy",[],!0,function(require,e,t){function r(e){return e.length>0&&"?"!=e.substring(0,1)?"?"+e:e}var n=System.global,i=n.define;n.define=void 0;var o=function(){function e(){}return e}();return e.LocationStrategy=o,e.normalizeQueryParams=r,n.define=i,t.exports}),System.register("angular2/src/router/url_parser",["angular2/src/facade/collection","angular2/src/facade/lang","angular2/src/facade/exceptions"],!0,function(require,e,t){function r(e){for(var t=new p(e[e.length-1]),r=e.length-2;r>=0;r-=1)t=new p(e[r],t);return t}function n(e){var t=u.RegExpWrapper.firstMatch(d,e);return u.isPresent(t)?t[0]:""}function i(e){var t=[];return u.isPresent(e)&&c.StringMapWrapper.forEach(e,function(e,r){1==e?t.push(r):t.push(r+"="+e)}),t}var o=System.global,s=o.define;o.define=void 0;var a=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},c=require("angular2/src/facade/collection"),u=require("angular2/src/facade/lang"),l=require("angular2/src/facade/exceptions"),p=function(){function e(e,t,r,n){void 0===t&&(t=null),void 0===r&&(r=u.CONST_EXPR([])),void 0===n&&(n=null),this.path=e,this.child=t,this.auxiliary=r,this.params=n}return e.prototype.toString=function(){return this.path+this._matrixParamsToString()+this._auxToString()+this._childString()},e.prototype.segmentToString=function(){return this.path+this._matrixParamsToString()},e.prototype._auxToString=function(){return this.auxiliary.length>0?"("+this.auxiliary.map(function(e){return e.toString()}).join("//")+")":""},e.prototype._matrixParamsToString=function(){return u.isBlank(this.params)?"":";"+i(this.params).join(";")},e.prototype._childString=function(){return u.isPresent(this.child)?"/"+this.child.toString():""},e}();e.Url=p;var f=function(e){function t(t,r,n,i){void 0===r&&(r=null),void 0===n&&(n=u.CONST_EXPR([])),void 0===i&&(i=null),e.call(this,t,r,n,i)}return a(t,e),t.prototype.toString=function(){return this.path+this._auxToString()+this._childString()+this._queryParamsToString()},t.prototype.segmentToString=function(){return this.path+this._queryParamsToString()},t.prototype._queryParamsToString=function(){return u.isBlank(this.params)?"":"?"+i(this.params).join("&")},t}(p);e.RootUrl=f,e.pathSegmentsToUrl=r;var d=u.RegExpWrapper.create("^[^\\/\\(\\)\\?;=&#]+"),h=function(){function e(){}return e.prototype.peekStartsWith=function(e){return this._remaining.startsWith(e)},e.prototype.capture=function(e){if(!this._remaining.startsWith(e))throw new l.BaseException('Expected "'+e+'".');this._remaining=this._remaining.substring(e.length)},e.prototype.parse=function(e){return this._remaining=e,""==e||"/"==e?new p(""):this.parseRoot()},e.prototype.parseRoot=function(){this.peekStartsWith("/")&&this.capture("/");var e=n(this._remaining);this.capture(e);var t=[];this.peekStartsWith("(")&&(t=this.parseAuxiliaryRoutes()),this.peekStartsWith(";")&&this.parseMatrixParams();var r=null;this.peekStartsWith("/")&&!this.peekStartsWith("//")&&(this.capture("/"),r=this.parseSegment());var i=null;return this.peekStartsWith("?")&&(i=this.parseQueryParams()),new f(e,r,t,i)},e.prototype.parseSegment=function(){if(0==this._remaining.length)return null;this.peekStartsWith("/")&&this.capture("/");var e=n(this._remaining);this.capture(e);var t=null;this.peekStartsWith(";")&&(t=this.parseMatrixParams());var r=[];this.peekStartsWith("(")&&(r=this.parseAuxiliaryRoutes());var i=null;return this.peekStartsWith("/")&&!this.peekStartsWith("//")&&(this.capture("/"),i=this.parseSegment()),new p(e,i,r,t)},e.prototype.parseQueryParams=function(){var e={};for(this.capture("?"),this.parseParam(e);this._remaining.length>0&&this.peekStartsWith("&");)this.capture("&"),this.parseParam(e);return e},e.prototype.parseMatrixParams=function(){for(var e={};this._remaining.length>0&&this.peekStartsWith(";");)this.capture(";"),this.parseParam(e);return e},e.prototype.parseParam=function(e){var t=n(this._remaining);if(!u.isBlank(t)){this.capture(t);var r=!0;if(this.peekStartsWith("=")){this.capture("=");var i=n(this._remaining);u.isPresent(i)&&(r=i,this.capture(r))}e[t]=r}},e.prototype.parseAuxiliaryRoutes=function(){var e=[];for(this.capture("(");!this.peekStartsWith(")")&&this._remaining.length>0;)e.push(this.parseSegment()),this.peekStartsWith("//")&&this.capture("//");return this.capture(")"),e},e}();return e.UrlParser=h,e.parser=new h,e.serializeParams=i,o.define=s,t.exports}),System.register("angular2/src/router/route_config_impl",["angular2/src/facade/lang"],!0,function(require,e,t){var r=System.global,n=r.define;r.define=void 0;var i=this&&this.__decorate||function(e,t,r,n){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,r,n);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,n){return void(n&&n(t,r))},void 0);case 4:return e.reduceRight(function(e,n){return n&&n(t,r,e)||e},n)}},o=this&&this.__metadata||function(e,t){return"object"==typeof Reflect&&"function"==typeof Reflect.metadata?Reflect.metadata(e,t):void 0},s=require("angular2/src/facade/lang"),a=function(){function e(e){this.configs=e}return e=i([s.CONST(),o("design:paramtypes",[Array])],e)}();e.RouteConfig=a;var c=function(){function e(e){var t=e.path,r=e.component,n=e.name,i=e.data,o=e.useAsDefault;this.aux=null,this.loader=null,this.redirectTo=null,this.path=t,this.component=r,this.name=n,this.data=i,this.useAsDefault=o}return e=i([s.CONST(),o("design:paramtypes",[Object])],e)}();e.Route=c;var u=function(){function e(e){var t=e.path,r=e.component,n=e.name;this.data=null,this.aux=null,this.loader=null,this.redirectTo=null,this.useAsDefault=!1,this.path=t,this.component=r,this.name=n}return e=i([s.CONST(),o("design:paramtypes",[Object])],e)}();e.AuxRoute=u;var l=function(){function e(e){var t=e.path,r=e.loader,n=e.name,i=e.data,o=e.useAsDefault;this.aux=null,this.path=t,this.loader=r,this.name=n,this.data=i,this.useAsDefault=o}return e=i([s.CONST(),o("design:paramtypes",[Object])],e)}();e.AsyncRoute=l;var p=function(){function e(e){var t=e.path,r=e.redirectTo;this.name=null,this.loader=null,this.data=null,this.aux=null,this.useAsDefault=!1,this.path=t,this.redirectTo=r}return e=i([s.CONST(),o("design:paramtypes",[Object])],e)}();return e.Redirect=p,r.define=n,t.exports}),System.register("angular2/src/router/async_route_handler",["angular2/src/facade/lang","angular2/src/router/instruction"],!0,function(require,e,t){var r=System.global,n=r.define;r.define=void 0;var i=require("angular2/src/facade/lang"),o=require("angular2/src/router/instruction"),s=function(){function e(e,t){void 0===t&&(t=null),this._loader=e,this._resolvedComponent=null,this.data=i.isPresent(t)?new o.RouteData(t):o.BLANK_ROUTE_DATA}return e.prototype.resolveComponentType=function(){var e=this;return i.isPresent(this._resolvedComponent)?this._resolvedComponent:this._resolvedComponent=this._loader().then(function(t){return e.componentType=t,t})},e}();return e.AsyncRouteHandler=s,r.define=n,t.exports}),System.register("angular2/src/router/sync_route_handler",["angular2/src/facade/async","angular2/src/facade/lang","angular2/src/router/instruction"],!0,function(require,e,t){var r=System.global,n=r.define;r.define=void 0;var i=require("angular2/src/facade/async"),o=require("angular2/src/facade/lang"),s=require("angular2/src/router/instruction"),a=function(){function e(e,t){this.componentType=e,this._resolvedComponent=null,this._resolvedComponent=i.PromiseWrapper.resolve(e),this.data=o.isPresent(t)?new s.RouteData(t):s.BLANK_ROUTE_DATA}return e.prototype.resolveComponentType=function(){return this._resolvedComponent},e}();return e.SyncRouteHandler=a,r.define=n,t.exports}),System.register("angular2/src/router/route_config_decorator",["angular2/src/router/route_config_impl","angular2/src/core/util/decorators","angular2/src/router/route_config_impl"],!0,function(require,e,t){var r=System.global,n=r.define;r.define=void 0;var i=require("angular2/src/router/route_config_impl"),o=require("angular2/src/core/util/decorators"),s=require("angular2/src/router/route_config_impl");return e.Route=s.Route,e.Redirect=s.Redirect,e.AuxRoute=s.AuxRoute,e.AsyncRoute=s.AsyncRoute,e.RouteConfig=o.makeDecorator(i.RouteConfig),r.define=n,t.exports}),System.register("angular2/src/router/hash_location_strategy",["angular2/src/core/dom/dom_adapter","angular2/angular2","angular2/src/router/location_strategy"],!0,function(require,e,t){var r=System.global,n=r.define;r.define=void 0;var i=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},o=this&&this.__decorate||function(e,t,r,n){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,r,n);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,n){return void(n&&n(t,r))},void 0);case 4:return e.reduceRight(function(e,n){return n&&n(t,r,e)||e},n)}},s=this&&this.__metadata||function(e,t){return"object"==typeof Reflect&&"function"==typeof Reflect.metadata?Reflect.metadata(e,t):void 0},a=require("angular2/src/core/dom/dom_adapter"),c=require("angular2/angular2"),u=require("angular2/src/router/location_strategy"),l=function(e){function t(){e.call(this),this._location=a.DOM.getLocation(),this._history=a.DOM.getHistory()}return i(t,e),t.prototype.onPopState=function(e){a.DOM.getGlobalEventTarget("window").addEventListener("popstate",e,!1)},t.prototype.getBaseHref=function(){return""},t.prototype.path=function(){var e=this._location.hash;return(e.length>0?e.substring(1):e)+u.normalizeQueryParams(this._location.search)},t.prototype.prepareExternalUrl=function(e){return e.length>0?"#"+e:e},t.prototype.pushState=function(e,t,r,n){var i=r+u.normalizeQueryParams(n);i=0==i.length?this._location.pathname:this.prepareExternalUrl(i),this._history.pushState(e,t,i)},t.prototype.forward=function(){this._history.forward()},t.prototype.back=function(){this._history.back()},t=o([c.Injectable(),s("design:paramtypes",[])],t)}(u.LocationStrategy);return e.HashLocationStrategy=l,r.define=n,t.exports}),System.register("angular2/src/router/path_location_strategy",["angular2/src/core/dom/dom_adapter","angular2/angular2","angular2/src/router/location_strategy"],!0,function(require,e,t){var r=System.global,n=r.define;r.define=void 0;var i=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},o=this&&this.__decorate||function(e,t,r,n){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,r,n);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,n){return void(n&&n(t,r))},void 0);case 4:return e.reduceRight(function(e,n){return n&&n(t,r,e)||e},n)}},s=this&&this.__metadata||function(e,t){return"object"==typeof Reflect&&"function"==typeof Reflect.metadata?Reflect.metadata(e,t):void 0},a=require("angular2/src/core/dom/dom_adapter"),c=require("angular2/angular2"),u=require("angular2/src/router/location_strategy"),l=function(e){function t(){e.call(this),this._location=a.DOM.getLocation(),this._history=a.DOM.getHistory(),this._baseHref=a.DOM.getBaseHref()}return i(t,e),t.prototype.onPopState=function(e){a.DOM.getGlobalEventTarget("window").addEventListener("popstate",e,!1),a.DOM.getGlobalEventTarget("window").addEventListener("hashchange",e,!1)},t.prototype.getBaseHref=function(){return this._baseHref},t.prototype.prepareExternalUrl=function(e){return this._baseHref+e},t.prototype.path=function(){return this._location.pathname+u.normalizeQueryParams(this._location.search)},t.prototype.pushState=function(e,t,r,n){this._history.pushState(e,t,r+u.normalizeQueryParams(n))},t.prototype.forward=function(){this._history.forward()},t.prototype.back=function(){this._history.back()},t=o([c.Injectable(),s("design:paramtypes",[])],t)}(u.LocationStrategy);return e.PathLocationStrategy=l,r.define=n,t.exports}),System.register("angular2/src/router/route_definition",[],!0,function(require,e,t){var r=System.global,n=r.define;return r.define=void 0,r.define=n,t.exports}),System.register("angular2/src/router/location",["angular2/src/router/location_strategy","angular2/src/facade/lang","angular2/src/facade/async","angular2/src/facade/lang","angular2/src/facade/exceptions","angular2/angular2"],!0,function(require,e,t){function r(e,t){return e.length>0&&t.startsWith(e)?t.substring(e.length):t}function n(e,t){return t.startsWith(e)?t:e+t}function i(e){return/\/index.html$/g.test(e)?e.substring(0,e.length-11):e}function o(e){return/\/$/g.test(e)&&(e=e.substring(0,e.length-1)),e}var s=System.global,a=s.define;s.define=void 0;var c=this&&this.__decorate||function(e,t,r,n){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,r,n);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,n){return void(n&&n(t,r))},void 0);case 4:return e.reduceRight(function(e,n){return n&&n(t,r,e)||e},n)}},u=this&&this.__metadata||function(e,t){return"object"==typeof Reflect&&"function"==typeof Reflect.metadata?Reflect.metadata(e,t):void 0},l=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}},p=require("angular2/src/router/location_strategy"),f=require("angular2/src/facade/lang"),d=require("angular2/src/facade/async"),h=require("angular2/src/facade/lang"),g=require("angular2/src/facade/exceptions"),v=require("angular2/angular2");e.APP_BASE_HREF=f.CONST_EXPR(new v.OpaqueToken("appBaseHref"));var m=function(){function t(e,t){var r=this;this.platformStrategy=e,this._subject=new d.EventEmitter;var n=f.isPresent(t)?t:this.platformStrategy.getBaseHref();if(h.isBlank(n))throw new g.BaseException("No base href set. Either provide a provider for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=o(i(n)),this.platformStrategy.onPopState(function(e){d.ObservableWrapper.callNext(r._subject,{url:r.path(),pop:!0})})}return t.prototype.path=function(){return this.normalize(this.platformStrategy.path())},t.prototype.normalize=function(e){return o(r(this._baseHref,i(e)))},t.prototype.prepareExternalUrl=function(e){return e.startsWith("/")||(e="/"+e),this.platformStrategy.prepareExternalUrl(o(n(this._baseHref,e)))},t.prototype.go=function(e,t){void 0===t&&(t=""),this.platformStrategy.pushState(null,"",e,t)},t.prototype.forward=function(){this.platformStrategy.forward()},t.prototype.back=function(){this.platformStrategy.back()},t.prototype.subscribe=function(e,t,r){return void 0===t&&(t=null),void 0===r&&(r=null),d.ObservableWrapper.subscribe(this._subject,e,t,r)},t=c([v.Injectable(),l(1,v.Optional()),l(1,v.Inject(e.APP_BASE_HREF)),u("design:paramtypes",[p.LocationStrategy,String])],t)}();return e.Location=m,s.define=a,t.exports}),System.register("angular2/src/router/path_recognizer",["angular2/src/facade/lang","angular2/src/facade/exceptions","angular2/src/facade/collection","angular2/src/router/url_parser"],!0,function(require,e,t){function r(e){return u.isBlank(e)?null:e.toString()}function n(e){e.startsWith("/")&&(e=e.substring(1));var t=o(e),r=[],n=0;if(t.length>98)throw new l.BaseException("'"+e+"' has more than the maximum supported number of segments.");for(var i=t.length-1,s=0;i>=s;s++){var a,c=t[s];if(u.isPresent(a=u.RegExpWrapper.firstMatch(y,c)))r.push(new v(a[1])),n+=100-s;else if(u.isPresent(a=u.RegExpWrapper.firstMatch(_,c)))r.push(new m(a[1]));else if("..."==c){if(i>s)throw new l.BaseException('Unexpected "..." before the end of the path for "'+e+'".');r.push(new h)}else r.push(new g(c)),n+=100*(100-s)}var f=p.StringMapWrapper.create();return p.StringMapWrapper.set(f,"segments",r),p.StringMapWrapper.set(f,"specificity",n),f}function i(e){return e.map(function(e){return e instanceof m?"*":e instanceof h?"...":e instanceof v?":":e instanceof g?e.path:void 0}).join("/")}function o(e){return e.split("/")}function s(e){if(u.StringWrapper.contains(e,"#"))throw new l.BaseException('Path "'+e+'" should not include "#". Use "HashLocationStrategy" instead.');var t=u.RegExpWrapper.firstMatch(b,e);if(u.isPresent(t))throw new l.BaseException('Path "'+e+'" contains "'+t[0]+'" which is not allowed in a route config.')}var a=System.global,c=a.define;a.define=void 0;var u=require("angular2/src/facade/lang"),l=require("angular2/src/facade/exceptions"),p=require("angular2/src/facade/collection"),f=require("angular2/src/router/url_parser"),d=function(){function e(e){var t=this;this.map={},this.keys={},u.isPresent(e)&&p.StringMapWrapper.forEach(e,function(e,r){t.map[r]=u.isPresent(e)?e.toString():null,t.keys[r]=!0})}return e.prototype.get=function(e){return p.StringMapWrapper["delete"](this.keys,e),this.map[e]},e.prototype.getUnused=function(){var e=this,t={},r=p.StringMapWrapper.keys(this.keys);return r.forEach(function(r){return t[r]=p.StringMapWrapper.get(e.map,r)}),t},e}(),h=function(){function e(){this.name=""}return e.prototype.generate=function(e){return""},e.prototype.match=function(e){return!0},e}(),g=function(){function e(e){this.path=e,this.name=""}return e.prototype.match=function(e){return e==this.path},e.prototype.generate=function(e){return this.path},e}(),v=function(){function e(e){this.name=e}return e.prototype.match=function(e){return e.length>0},e.prototype.generate=function(e){if(!p.StringMapWrapper.contains(e.map,this.name))throw new l.BaseException("Route generator for '"+this.name+"' was not included in parameters passed.");return r(e.get(this.name))},e}(),m=function(){function e(e){this.name=e}return e.prototype.match=function(e){return!0},e.prototype.generate=function(e){return r(e.get(this.name))},e}(),y=/^:([^\/]+)$/g,_=/^\*([^\/]+)$/g,b=u.RegExpWrapper.create("//|\\(|\\)|;|\\?|="),x=function(){function e(e){this.path=e,this.terminal=!0,s(e);var t=n(e);this._segments=t.segments,this.specificity=t.specificity,this.hash=i(this._segments);var r=this._segments[this._segments.length-1];this.terminal=!(r instanceof h)}return e.prototype.recognize=function(e){for(var t,r=e,n={},i=[],o=0;o<this._segments.length;o+=1){var s=this._segments[o];if(t=r,s instanceof h)break;if(u.isPresent(t)){if(i.push(t.path),s instanceof m){n[s.name]=t.toString(),r=null;break}if(s instanceof v)n[s.name]=t.path;else if(!s.match(t.path))return null;r=t.child}else if(!s.match(""))return null}if(this.terminal&&u.isPresent(r))return null;var a,c,l,d=i.join("/");if(u.isPresent(t)){var g=e instanceof f.RootUrl?e:t;l=u.isPresent(g.params)?p.StringMapWrapper.merge(g.params,n):n,c=f.serializeParams(g.params),a=t.auxiliary}else l=n,a=[],c=[];return{urlPath:d,urlParams:c,allParams:l,auxiliary:a,nextSegment:r}},e.prototype.generate=function(e){for(var t=new d(e),r=[],n=0;n<this._segments.length;n++){var i=this._segments[n];i instanceof h||r.push(i.generate(t))}var o=r.join("/"),s=t.getUnused(),a=f.serializeParams(s);return{urlPath:o,urlParams:a}},e}();return e.PathRecognizer=x,a.define=c,t.exports}),System.register("angular2/src/router/component_recognizer",["angular2/src/facade/lang","angular2/src/facade/exceptions","angular2/src/facade/collection","angular2/src/facade/async","angular2/src/router/route_recognizer","angular2/src/router/route_config_impl","angular2/src/router/async_route_handler","angular2/src/router/sync_route_handler"],!0,function(require,e,t){var r=System.global,n=r.define;r.define=void 0;var i=require("angular2/src/facade/lang"),o=require("angular2/src/facade/exceptions"),s=require("angular2/src/facade/collection"),a=require("angular2/src/facade/async"),c=require("angular2/src/router/route_recognizer"),u=require("angular2/src/router/route_config_impl"),l=require("angular2/src/router/async_route_handler"),p=require("angular2/src/router/sync_route_handler"),f=function(){function e(){this.names=new s.Map,this.auxNames=new s.Map,this.auxRoutes=new s.Map,this.matchers=[],this.defaultRoute=null}return e.prototype.config=function(e){var t;if(i.isPresent(e.name)&&e.name[0].toUpperCase()!=e.name[0]){var r=e.name[0].toUpperCase()+e.name.substring(1);throw new o.BaseException('Route "'+e.path+'" with name "'+e.name+'" does not begin with an uppercase letter. Route names should be CamelCase like "'+r+'".')}if(e instanceof u.AuxRoute){t=new p.SyncRouteHandler(e.component,e.data);var n=e.path.startsWith("/")?e.path.substring(1):e.path,s=new c.RouteRecognizer(e.path,t);return this.auxRoutes.set(n,s),i.isPresent(e.name)&&this.auxNames.set(e.name,s),s.terminal}var a=!1;if(e instanceof u.Redirect){var f=new c.RedirectRecognizer(e.path,e.redirectTo);return this._assertNoHashCollision(f.hash,e.path),this.matchers.push(f),!0}e instanceof u.Route?(t=new p.SyncRouteHandler(e.component,e.data),a=i.isPresent(e.useAsDefault)&&e.useAsDefault):e instanceof u.AsyncRoute&&(t=new l.AsyncRouteHandler(e.loader,e.data),a=i.isPresent(e.useAsDefault)&&e.useAsDefault);var s=new c.RouteRecognizer(e.path,t);if(this._assertNoHashCollision(s.hash,e.path),a){if(i.isPresent(this.defaultRoute))throw new o.BaseException("Only one route can be default");this.defaultRoute=s}return this.matchers.push(s),i.isPresent(e.name)&&this.names.set(e.name,s),s.terminal},e.prototype._assertNoHashCollision=function(e,t){this.matchers.forEach(function(r){if(e==r.hash)throw new o.BaseException("Configuration '"+t+"' conflicts with existing route '"+r.path+"'")})},e.prototype.recognize=function(e){var t=[];return this.matchers.forEach(function(r){var n=r.recognize(e);i.isPresent(n)&&t.push(n)}),t},e.prototype.recognizeAuxiliary=function(e){var t=this.auxRoutes.get(e.path);return i.isPresent(t)?[t.recognize(e)]:[a.PromiseWrapper.resolve(null)]},e.prototype.hasRoute=function(e){return this.names.has(e)},e.prototype.componentLoaded=function(e){return this.hasRoute(e)&&i.isPresent(this.names.get(e).handler.componentType)},e.prototype.loadComponent=function(e){return this.names.get(e).handler.resolveComponentType()},e.prototype.generate=function(e,t){var r=this.names.get(e);return i.isBlank(r)?null:r.generate(t)},e.prototype.generateAuxiliary=function(e,t){var r=this.auxNames.get(e);return i.isBlank(r)?null:r.generate(t)},e}();return e.ComponentRecognizer=f,r.define=n,t.exports}),System.register("angular2/src/router/route_config_nomalizer",["angular2/src/router/route_config_decorator","angular2/src/facade/lang","angular2/src/facade/exceptions"],!0,function(require,e,t){function r(e){if(e instanceof s.Route||e instanceof s.Redirect||e instanceof s.AsyncRoute||e instanceof s.AuxRoute)return e;if(+!!e.component+ +!!e.redirectTo+ +!!e.loader!=1)throw new c.BaseException('Route config should contain exactly one "component", "loader", or "redirectTo" property.');if(e.as&&e.name)throw new c.BaseException('Route config should contain exactly one "as" or "name" property.');if(e.as&&(e.name=e.as),e.loader)return new s.AsyncRoute({path:e.path,loader:e.loader,name:e.name});if(e.aux)return new s.AuxRoute({path:e.aux,component:e.component,name:e.name});if(e.component){if("object"==typeof e.component){var t=e.component;if("constructor"==t.type)return new s.Route({path:e.path,component:t.constructor,name:e.name});if("loader"==t.type)return new s.AsyncRoute({path:e.path,loader:t.loader,name:e.name});throw new c.BaseException('Invalid component type "'+t.type+'". Valid types are "constructor" and "loader".')}return new s.Route(e)}return e.redirectTo?new s.Redirect({path:e.path,redirectTo:e.redirectTo}):e}function n(e,t){if(!a.isType(e))throw new c.BaseException('Component for route "'+t+'" is not defined, or is not a class.')}var i=System.global,o=i.define;i.define=void 0;var s=require("angular2/src/router/route_config_decorator"),a=require("angular2/src/facade/lang"),c=require("angular2/src/facade/exceptions");return e.normalizeRouteConfig=r,e.assertComponentExists=n,i.define=o,t.exports}),System.register("angular2/src/router/route_lifecycle_reflector",["angular2/src/facade/lang","angular2/src/router/lifecycle_annotations_impl","angular2/src/core/reflection/reflection"],!0,function(require,e,t){function r(e,t){return t instanceof s.Type?e.name in t.prototype:!1}function n(e){for(var t=c.reflector.annotations(e),r=0;r<t.length;r+=1){var n=t[r];if(n instanceof a.CanActivate)return n.fn}return null}var i=System.global,o=i.define;i.define=void 0;var s=require("angular2/src/facade/lang"),a=require("angular2/src/router/lifecycle_annotations_impl"),c=require("angular2/src/core/reflection/reflection");return e.hasLifecycleHook=r,e.getCanActivateHook=n,i.define=o,t.exports}),System.register("angular2/src/router/router_link",["angular2/angular2","angular2/src/facade/lang","angular2/src/router/router","angular2/src/router/location"],!0,function(require,e,t){var r=System.global,n=r.define;r.define=void 0;var i=this&&this.__decorate||function(e,t,r,n){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,r,n);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,n){return void(n&&n(t,r))},void 0);case 4:return e.reduceRight(function(e,n){return n&&n(t,r,e)||e},n)}},o=this&&this.__metadata||function(e,t){return"object"==typeof Reflect&&"function"==typeof Reflect.metadata?Reflect.metadata(e,t):void 0;
},s=require("angular2/angular2"),a=require("angular2/src/facade/lang"),c=require("angular2/src/router/router"),u=require("angular2/src/router/location"),l=function(){function e(e,t){this._router=e,this._location=t}return Object.defineProperty(e.prototype,"isRouteActive",{get:function(){return this._router.isRouteActive(this._navigationInstruction)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"routeParams",{set:function(e){this._routeParams=e,this._navigationInstruction=this._router.generate(this._routeParams);var t=this._navigationInstruction.toLinkUrl();this.visibleHref=this._location.prepareExternalUrl(t)},enumerable:!0,configurable:!0}),e.prototype.onClick=function(){return a.isString(this.target)&&"_self"!=this.target?!0:(this._router.navigateByInstruction(this._navigationInstruction),!1)},e=i([s.Directive({selector:"[router-link]",inputs:["routeParams: routerLink","target: target"],host:{"(click)":"onClick()","[attr.href]":"visibleHref","[class.router-link-active]":"isRouteActive"}}),o("design:paramtypes",[c.Router,u.Location])],e)}();return e.RouterLink=l,r.define=n,t.exports}),System.register("angular2/src/router/route_recognizer",["angular2/src/facade/lang","angular2/src/facade/exceptions","angular2/src/facade/promise","angular2/src/facade/collection","angular2/src/router/instruction","angular2/src/router/path_recognizer"],!0,function(require,e,t){var r=System.global,n=r.define;r.define=void 0;var i=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},o=require("angular2/src/facade/lang"),s=require("angular2/src/facade/exceptions"),a=require("angular2/src/facade/promise"),c=require("angular2/src/facade/collection"),u=require("angular2/src/router/instruction"),l=require("angular2/src/router/path_recognizer"),p=function(){function e(){}return e}();e.Match=p;var f=function(e){function t(t,r,n){e.call(this),this.instruction=t,this.remaining=r,this.remainingAux=n}return i(t,e),t}(p);e.PathMatch=f;var d=function(e){function t(t,r){e.call(this),this.redirectTo=t,this.specificity=r}return i(t,e),t}(p);e.RedirectMatch=d;var h=function(){function e(e,t){this.path=e,this.redirectTo=t,this._pathRecognizer=new l.PathRecognizer(e),this.hash=this._pathRecognizer.hash}return e.prototype.recognize=function(e){var t=null;return o.isPresent(this._pathRecognizer.recognize(e))&&(t=new d(this.redirectTo,this._pathRecognizer.specificity)),a.PromiseWrapper.resolve(t)},e.prototype.generate=function(e){throw new s.BaseException("Tried to generate a redirect.")},e}();e.RedirectRecognizer=h;var g=function(){function e(e,t){this.path=e,this.handler=t,this.terminal=!0,this._cache=new c.Map,this._pathRecognizer=new l.PathRecognizer(e),this.specificity=this._pathRecognizer.specificity,this.hash=this._pathRecognizer.hash,this.terminal=this._pathRecognizer.terminal}return e.prototype.recognize=function(e){var t=this,r=this._pathRecognizer.recognize(e);return o.isBlank(r)?null:this.handler.resolveComponentType().then(function(e){var n=t._getInstruction(r.urlPath,r.urlParams,r.allParams);return new f(n,r.nextSegment,r.auxiliary)})},e.prototype.generate=function(e){var t=this._pathRecognizer.generate(e),r=t.urlPath,n=t.urlParams;return this._getInstruction(r,n,e)},e.prototype.generateStrings=function(e){return this._pathRecognizer.generate(e)},e.prototype._getInstruction=function(e,t,r){if(!this.handler.componentType)throw new s.BaseException("Tried to get instruction before loaded.");var n=e+"?"+t.join("?");if(this._cache.has(n))return this._cache.get(n);var i=new u.ComponentInstruction(e,t,this.handler.data,this.handler.componentType,this.terminal,this.specificity,r);return this._cache.set(n,i),i},e}();return e.RouteRecognizer=g,r.define=n,t.exports}),System.register("angular2/src/router/route_registry",["angular2/src/router/route_recognizer","angular2/src/router/component_recognizer","angular2/src/router/instruction","angular2/src/facade/collection","angular2/src/facade/async","angular2/src/facade/lang","angular2/src/facade/exceptions","angular2/src/router/route_config_impl","angular2/src/core/reflection/reflection","angular2/angular2","angular2/src/router/route_config_nomalizer","angular2/src/router/url_parser"],!0,function(require,e,t){function r(e){return p.ListWrapper.maximum(e,function(e){return e.specificity})}function n(e,t){if(d.isType(e)){var r=v.reflector.annotations(e);if(d.isPresent(r))for(var n=0;n<r.length;n++){var i=r[n];if(i instanceof g.RouteConfig)throw new h.BaseException('Child routes are not allowed for "'+t+'". Use "..." on the parent\'s route path.')}}}var i=System.global,o=i.define;i.define=void 0;var s=this&&this.__decorate||function(e,t,r,n){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,r,n);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,n){return void(n&&n(t,r))},void 0);case 4:return e.reduceRight(function(e,n){return n&&n(t,r,e)||e},n)}},a=this&&this.__metadata||function(e,t){return"object"==typeof Reflect&&"function"==typeof Reflect.metadata?Reflect.metadata(e,t):void 0},c=require("angular2/src/router/route_recognizer"),u=require("angular2/src/router/component_recognizer"),l=require("angular2/src/router/instruction"),p=require("angular2/src/facade/collection"),f=require("angular2/src/facade/async"),d=require("angular2/src/facade/lang"),h=require("angular2/src/facade/exceptions"),g=require("angular2/src/router/route_config_impl"),v=require("angular2/src/core/reflection/reflection"),m=require("angular2/angular2"),y=require("angular2/src/router/route_config_nomalizer"),_=require("angular2/src/router/url_parser"),b=f.PromiseWrapper.resolve(null),x=function(){function e(){this._rules=new p.Map}return e.prototype.config=function(e,t){var r=this;if(t=y.normalizeRouteConfig(t),t instanceof g.Route?y.assertComponentExists(t.component,t.path):t instanceof g.AuxRoute&&y.assertComponentExists(t.component,t.path),t instanceof g.AsyncRoute){var i=t.loader;t.loader=function(){return i().then(function(e){return r.configFromComponent(e),e})}}var o=this._rules.get(e);d.isBlank(o)&&(o=new u.ComponentRecognizer,this._rules.set(e,o));var s=o.config(t);t instanceof g.Route&&(s?n(t.component,t.path):this.configFromComponent(t.component))},e.prototype.configFromComponent=function(e){var t=this;if(d.isType(e)&&!this._rules.has(e)){var r=v.reflector.annotations(e);if(d.isPresent(r))for(var n=0;n<r.length;n++){var i=r[n];if(i instanceof g.RouteConfig){var o=i.configs;o.forEach(function(r){return t.config(e,r)})}}}},e.prototype.recognize=function(e,t){var r=_.parser.parse(e);return this._recognize(r,t)},e.prototype._recognize=function(e,t,n){var i=this;void 0===n&&(n=!1);var o=this._rules.get(t);if(d.isBlank(o))return b;var s=n?o.recognizeAuxiliary(e):o.recognize(e),a=s.map(function(e){return e.then(function(e){if(e instanceof c.PathMatch){if(e.instruction.terminal){var r=i._auxRoutesToUnresolved(e.remainingAux,t);return new l.ResolvedInstruction(e.instruction,null,r)}return i._recognize(e.remaining,e.instruction.componentType).then(function(r){if(d.isBlank(r))return null;var n=i._auxRoutesToUnresolved(e.remainingAux,t);return new l.ResolvedInstruction(e.instruction,r,n)})}return e instanceof c.RedirectMatch?i._generate(e.redirectTo,t):void 0})});return!d.isBlank(e)&&""!=e.path||0!=s.length?f.PromiseWrapper.all(a).then(r):f.PromiseWrapper.resolve(this.generateDefault(t))},e.prototype._auxRoutesToUnresolved=function(e,t){var r=this,n={};return e.forEach(function(e){n[e.path]=new l.UnresolvedInstruction(function(){return r._recognize(e,t,!0)})}),n},e.prototype.generate=function(e,t,r){void 0===r&&(r=!1);var n=e[0];if(d.isBlank(t))throw new h.BaseException('Could not find route named "'+n+'".');if(!d.isString(n))throw new h.BaseException('Unexpected segment "'+n+'" in link DSL. Expected a string.');if(""==n||"."==n||".."==n)throw new h.BaseException('"'+n+'/" is only allowed at the beginning of a link DSL.');return this._generate(e,t,r)},e.prototype._generate=function(e,t,r){var n=this;if(void 0===r&&(r=!1),0==e.length)return this.generateDefault(t);var i=0,o=e[i],s={};if(i+1<e.length){var a=e[i+1];d.isStringMap(a)&&!d.isArray(a)&&(s=a,i+=1)}for(var c,u={};i+1<e.length&&d.isArray(c=e[i+1]);){var f=this.generate(c,t,!0);u[f.component.urlPath]=f,i+=1}var g=this._rules.get(t);if(d.isBlank(g))throw new h.BaseException('Component "'+d.getTypeNameForDebugging(t)+'" has no route config.');var v=(r?g.auxNames:g.names).get(o);if(!d.isPresent(v))throw new h.BaseException('Component "'+d.getTypeNameForDebugging(t)+'" has no route named "'+o+'".');if(!d.isPresent(v.handler.componentType)){var m=v.generateStrings(s);return new l.UnresolvedInstruction(function(){return v.handler.resolveComponentType().then(function(){return n._generate(e,t,r)})},m.urlPath,m.urlParams)}var y=r?g.generateAuxiliary(o,s):g.generate(o,s),_=null,b=e.slice(i+1);if(d.isPresent(y.componentType))if(i+1<e.length)_=this.generate(b,y.componentType);else if(!y.terminal&&(_=this.generateDefault(y.componentType),d.isBlank(_)))throw new h.BaseException('Link "'+p.ListWrapper.toJSON(e)+'" does not resolve to a terminal instruction.');return new l.ResolvedInstruction(y,_,u)},e.prototype.hasRoute=function(e,t){var r=this._rules.get(t);return d.isBlank(r)?!1:r.hasRoute(e)},e.prototype.generateDefault=function(e){var t=this;if(d.isBlank(e))return null;var r=this._rules.get(e);if(d.isBlank(r)||d.isBlank(r.defaultRoute))return null;var n=null;if(d.isPresent(r.defaultRoute.handler.componentType)){var i=r.defaultRoute.generate({});return r.defaultRoute.terminal||(n=this.generateDefault(r.defaultRoute.handler.componentType)),new l.DefaultInstruction(i,n)}return new l.UnresolvedInstruction(function(){return r.defaultRoute.handler.resolveComponentType().then(function(){return t.generateDefault(e)})})},e=s([m.Injectable(),a("design:paramtypes",[])],e)}();return e.RouteRegistry=x,i.define=o,t.exports}),System.register("angular2/src/router/router",["angular2/src/facade/async","angular2/src/facade/collection","angular2/src/facade/lang","angular2/src/facade/exceptions","angular2/src/router/route_lifecycle_reflector"],!0,function(require,e,t){function r(e){return e.reduce(function(e,t){if(u.isString(t)){var r=t;return e.concat(r.split("/"))}return e.push(t),e},[])}function n(e,t){var r=f;return u.isPresent(e.child)&&(r=n(e.child,u.isPresent(t)?t.child:null)),r.then(function(r){if(0==r)return!1;if(e.component.reuse)return!0;var n=p.getCanActivateHook(e.component.componentType);return u.isPresent(n)?n(e.component,u.isPresent(t)?t.component:null):!0})}var i=System.global,o=i.define;i.define=void 0;var s=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},a=require("angular2/src/facade/async"),c=require("angular2/src/facade/collection"),u=require("angular2/src/facade/lang"),l=require("angular2/src/facade/exceptions"),p=require("angular2/src/router/route_lifecycle_reflector"),f=a.PromiseWrapper.resolve(!0),d=a.PromiseWrapper.resolve(!1),h=function(){function e(e,t,r){this.registry=e,this.parent=t,this.hostComponent=r,this.navigating=!1,this._currentInstruction=null,this._currentNavigation=f,this._outlet=null,this._auxRouters=new c.Map,this._subject=new a.EventEmitter}return e.prototype.childRouter=function(e){return this._childRouter=new v(this,e)},e.prototype.auxRouter=function(e){return new v(this,e)},e.prototype.registerPrimaryOutlet=function(e){if(u.isPresent(e.name))throw new l.BaseException("registerPrimaryOutlet expects to be called with an unnamed outlet.");return this._outlet=e,u.isPresent(this._currentInstruction)?this.commit(this._currentInstruction,!1):f},e.prototype.registerAuxOutlet=function(e){var t=e.name;if(u.isBlank(t))throw new l.BaseException("registerAuxOutlet expects to be called with an outlet with a name.");var r=this.auxRouter(this.hostComponent);this._auxRouters.set(t,r),r._outlet=e;var n;return u.isPresent(this._currentInstruction)&&u.isPresent(n=this._currentInstruction.auxInstruction[t])?r.commit(n):f},e.prototype.isRouteActive=function(e){for(var t=this;u.isPresent(t.parent)&&u.isPresent(e.child);)t=t.parent,e=e.child;return u.isPresent(this._currentInstruction)&&this._currentInstruction.component==e.component},e.prototype.config=function(e){var t=this;return e.forEach(function(e){t.registry.config(t.hostComponent,e)}),this.renavigate()},e.prototype.navigate=function(e){var t=this.generate(e);return this.navigateByInstruction(t,!1)},e.prototype.navigateByUrl=function(e,t){var r=this;return void 0===t&&(t=!1),this._currentNavigation=this._currentNavigation.then(function(n){return r.lastNavigationAttempt=e,r._startNavigating(),r._afterPromiseFinishNavigating(r.recognize(e).then(function(e){return u.isBlank(e)?!1:r._navigate(e,t)}))})},e.prototype.navigateByInstruction=function(e,t){var r=this;return void 0===t&&(t=!1),u.isBlank(e)?d:this._currentNavigation=this._currentNavigation.then(function(n){return r._startNavigating(),r._afterPromiseFinishNavigating(r._navigate(e,t))})},e.prototype._navigate=function(e,t){var r=this;return this._settleInstruction(e).then(function(t){return r._canReuse(e)}).then(function(t){return r._canActivate(e)}).then(function(n){return n?r._canDeactivate(e).then(function(n){return n?r.commit(e,t).then(function(t){return r._emitNavigationFinish(e.toRootUrl()),!0}):void 0}):!1})},e.prototype._settleInstruction=function(e){var t=this;return e.resolveComponent().then(function(r){var n=[];return u.isPresent(e.child)&&n.push(t._settleInstruction(e.child)),c.StringMapWrapper.forEach(e.auxInstruction,function(e,r){n.push(t._settleInstruction(e))}),a.PromiseWrapper.all(n)})},e.prototype._emitNavigationFinish=function(e){a.ObservableWrapper.callNext(this._subject,e)},e.prototype._afterPromiseFinishNavigating=function(e){var t=this;return a.PromiseWrapper.catchError(e.then(function(e){return t._finishNavigating()}),function(e){throw t._finishNavigating(),e})},e.prototype._canReuse=function(e){var t=this;return u.isBlank(this._outlet)?d:this._outlet.canReuse(e.component).then(function(r){return e.component.reuse=r,r&&u.isPresent(t._childRouter)&&u.isPresent(e.child)?t._childRouter._canReuse(e.child):void 0})},e.prototype._canActivate=function(e){return n(e,this._currentInstruction)},e.prototype._canDeactivate=function(e){var t=this;if(u.isBlank(this._outlet))return f;var r,n=null,i=!1,o=null;return u.isPresent(e)&&(n=e.child,o=e.component,i=e.component.reuse),r=i?f:this._outlet.canDeactivate(o),r.then(function(e){return 0==e?!1:u.isPresent(t._childRouter)?t._childRouter._canDeactivate(n):!0})},e.prototype.commit=function(e,t){var r=this;void 0===t&&(t=!1),this._currentInstruction=e;var n=f;if(u.isPresent(this._outlet)){var i=e.component;n=i.reuse?this._outlet.reuse(i):this.deactivate(e).then(function(e){return r._outlet.activate(i)}),u.isPresent(e.child)&&(n=n.then(function(t){return u.isPresent(r._childRouter)?r._childRouter.commit(e.child):void 0}))}var o=[];return this._auxRouters.forEach(function(t,r){u.isPresent(e.auxInstruction[r])&&o.push(t.commit(e.auxInstruction[r]))}),n.then(function(e){return a.PromiseWrapper.all(o)})},e.prototype._startNavigating=function(){this.navigating=!0},e.prototype._finishNavigating=function(){this.navigating=!1},e.prototype.subscribe=function(e){return a.ObservableWrapper.subscribe(this._subject,e)},e.prototype.deactivate=function(e){var t=this,r=null,n=null;u.isPresent(e)&&(r=e.child,n=e.component);var i=f;return u.isPresent(this._childRouter)&&(i=this._childRouter.deactivate(r)),u.isPresent(this._outlet)&&(i=i.then(function(e){return t._outlet.deactivate(n)})),i},e.prototype.recognize=function(e){return this.registry.recognize(e,this.hostComponent)},e.prototype.renavigate=function(){return u.isBlank(this.lastNavigationAttempt)?this._currentNavigation:this.navigateByUrl(this.lastNavigationAttempt)},e.prototype.generate=function(e){var t=r(e),n=c.ListWrapper.first(t),i=c.ListWrapper.slice(t,1),o=this;if(""==n)for(;u.isPresent(o.parent);)o=o.parent;else if(".."==n){for(o=o.parent;".."==c.ListWrapper.first(i);)if(i=c.ListWrapper.slice(i,1),o=o.parent,u.isBlank(o))throw new l.BaseException('Link "'+c.ListWrapper.toJSON(e)+'" has too many "../" segments.')}else if("."!=n){var s=this.registry.hasRoute(n,this.hostComponent),a=u.isPresent(this.parent)&&this.registry.hasRoute(n,this.parent.hostComponent);if(a&&s){var p='Link "'+c.ListWrapper.toJSON(e)+'" is ambiguous, use "./" or "../" to disambiguate.';throw new l.BaseException(p)}a&&(o=this.parent),i=e}if(""==i[i.length-1]&&i.pop(),i.length<1){var p='Link "'+c.ListWrapper.toJSON(e)+'" must include a route name.';throw new l.BaseException(p)}for(var f=this.registry.generate(i,o.hostComponent),d=[],h=o.parent;u.isPresent(h);)d.unshift(h._currentInstruction),h=h.parent;for(;d.length>0;)f=d.pop().replaceChild(f);return f},e}();e.Router=h;var g=function(e){function t(t,r,n){var i=this;e.call(this,t,null,n),this._location=r,this._locationSub=this._location.subscribe(function(e){return i.navigateByUrl(e.url,u.isPresent(e.pop))}),this.registry.configFromComponent(n),this.navigateByUrl(r.path())}return s(t,e),t.prototype.commit=function(t,r){var n=this;void 0===r&&(r=!1);var i=t.toUrlPath(),o=t.toUrlQuery();i.length>0&&(i="/"+i);var s=e.prototype.commit.call(this,t);return r||(s=s.then(function(e){n._location.go(i,o)})),s},t.prototype.dispose=function(){u.isPresent(this._locationSub)&&(a.ObservableWrapper.dispose(this._locationSub),this._locationSub=null)},t}(h);e.RootRouter=g;var v=function(e){function t(t,r){e.call(this,t.registry,t,r),this.parent=t}return s(t,e),t.prototype.navigateByUrl=function(e,t){return void 0===t&&(t=!1),this.parent.navigateByUrl(e,t)},t.prototype.navigateByInstruction=function(e,t){return void 0===t&&(t=!1),this.parent.navigateByInstruction(e,t)},t}(h);return i.define=o,t.exports}),System.register("angular2/src/router/router_outlet",["angular2/src/facade/async","angular2/src/facade/collection","angular2/src/facade/lang","angular2/src/facade/exceptions","angular2/angular2","angular2/src/router/router","angular2/src/router/instruction","angular2/src/router/lifecycle_annotations","angular2/src/router/route_lifecycle_reflector"],!0,function(require,e,t){var r=System.global,n=r.define;r.define=void 0;var i=this&&this.__decorate||function(e,t,r,n){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,r,n);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,n){return void(n&&n(t,r))},void 0);case 4:return e.reduceRight(function(e,n){return n&&n(t,r,e)||e},n)}},o=this&&this.__metadata||function(e,t){return"object"==typeof Reflect&&"function"==typeof Reflect.metadata?Reflect.metadata(e,t):void 0},s=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}},a=require("angular2/src/facade/async"),c=require("angular2/src/facade/collection"),u=require("angular2/src/facade/lang"),l=require("angular2/src/facade/exceptions"),p=require("angular2/angular2"),f=require("angular2/src/router/router"),d=require("angular2/src/router/instruction"),h=require("angular2/src/router/lifecycle_annotations"),g=require("angular2/src/router/route_lifecycle_reflector"),v=a.PromiseWrapper.resolve(!0),m=function(){function e(e,t,r,n){this._elementRef=e,this._loader=t,this._parentRouter=r,this.name=null,this._componentRef=null,this._currentInstruction=null,u.isPresent(n)?(this.name=n,this._parentRouter.registerAuxOutlet(this)):this._parentRouter.registerPrimaryOutlet(this)}return e.prototype.activate=function(e){var t=this,r=this._currentInstruction;this._currentInstruction=e;var n=e.componentType,i=this._parentRouter.childRouter(n),o=p.Injector.resolve([p.provide(d.RouteData,{useValue:e.routeData}),p.provide(d.RouteParams,{useValue:new d.RouteParams(e.params)}),p.provide(f.Router,{useValue:i})]);return this._loader.loadNextToLocation(n,this._elementRef,o).then(function(i){return t._componentRef=i,g.hasLifecycleHook(h.onActivate,n)?t._componentRef.instance.onActivate(e,r):void 0})},e.prototype.reuse=function(e){var t=this._currentInstruction;if(this._currentInstruction=e,u.isBlank(this._componentRef))throw new l.BaseException("Cannot reuse an outlet that does not contain a component.");return a.PromiseWrapper.resolve(g.hasLifecycleHook(h.onReuse,this._currentInstruction.componentType)?this._componentRef.instance.onReuse(e,t):!0)},e.prototype.deactivate=function(e){var t=this,r=v;return u.isPresent(this._componentRef)&&u.isPresent(this._currentInstruction)&&g.hasLifecycleHook(h.onDeactivate,this._currentInstruction.componentType)&&(r=a.PromiseWrapper.resolve(this._componentRef.instance.onDeactivate(e,this._currentInstruction))),r.then(function(e){u.isPresent(t._componentRef)&&(t._componentRef.dispose(),t._componentRef=null)})},e.prototype.canDeactivate=function(e){return u.isBlank(this._currentInstruction)?v:g.hasLifecycleHook(h.canDeactivate,this._currentInstruction.componentType)?a.PromiseWrapper.resolve(this._componentRef.instance.canDeactivate(e,this._currentInstruction)):v},e.prototype.canReuse=function(e){var t;return t=u.isBlank(this._currentInstruction)||this._currentInstruction.componentType!=e.componentType?!1:g.hasLifecycleHook(h.canReuse,this._currentInstruction.componentType)?this._componentRef.instance.canReuse(e,this._currentInstruction):e==this._currentInstruction||u.isPresent(e.params)&&u.isPresent(this._currentInstruction.params)&&c.StringMapWrapper.equals(e.params,this._currentInstruction.params),a.PromiseWrapper.resolve(t)},e=i([p.Directive({selector:"router-outlet"}),s(3,p.Attribute("name")),o("design:paramtypes",[p.ElementRef,p.DynamicComponentLoader,f.Router,String])],e)}();return e.RouterOutlet=m,r.define=n,t.exports}),System.register("angular2/router",["angular2/src/router/router","angular2/src/router/router_outlet","angular2/src/router/router_link","angular2/src/router/instruction","angular2/src/router/route_registry","angular2/src/router/location_strategy","angular2/src/router/hash_location_strategy","angular2/src/router/path_location_strategy","angular2/src/router/location","angular2/src/router/route_config_decorator","angular2/src/router/route_definition","angular2/src/router/lifecycle_annotations","angular2/src/router/instruction","angular2/angular2","angular2/src/router/location_strategy","angular2/src/router/path_location_strategy","angular2/src/router/router","angular2/src/router/router_outlet","angular2/src/router/router_link","angular2/src/router/route_registry","angular2/src/router/location","angular2/angular2","angular2/src/facade/lang","angular2/src/facade/exceptions"],!0,function(require,e,t){function r(t){for(var r in t)e.hasOwnProperty(r)||(e[r]=t[r])}function n(e,t,r,n){var i=new x.RootRouter(e,t,r);return n.registerDisposeListener(function(){return i.dispose()}),i}function i(e){if(0==e.componentTypes.length)throw new O.BaseException("Bootstrap at least one component before injecting Router.");return e.componentTypes[0]}var o=System.global,s=o.define;o.define=void 0;var a=require("angular2/src/router/router");e.Router=a.Router;var c=require("angular2/src/router/router_outlet");e.RouterOutlet=c.RouterOutlet;var u=require("angular2/src/router/router_link");e.RouterLink=u.RouterLink;var l=require("angular2/src/router/instruction");e.RouteParams=l.RouteParams,e.RouteData=l.RouteData;var p=require("angular2/src/router/route_registry");e.RouteRegistry=p.RouteRegistry;var f=require("angular2/src/router/location_strategy");e.LocationStrategy=f.LocationStrategy;var d=require("angular2/src/router/hash_location_strategy");e.HashLocationStrategy=d.HashLocationStrategy;var h=require("angular2/src/router/path_location_strategy");e.PathLocationStrategy=h.PathLocationStrategy;var g=require("angular2/src/router/location");e.Location=g.Location,e.APP_BASE_HREF=g.APP_BASE_HREF,r(require("angular2/src/router/route_config_decorator")),r(require("angular2/src/router/route_definition"));var v=require("angular2/src/router/lifecycle_annotations");e.CanActivate=v.CanActivate;var m=require("angular2/src/router/instruction");e.Instruction=m.Instruction,e.ComponentInstruction=m.ComponentInstruction;var y=require("angular2/angular2");e.OpaqueToken=y.OpaqueToken;var _=require("angular2/src/router/location_strategy"),b=require("angular2/src/router/path_location_strategy"),x=require("angular2/src/router/router"),w=require("angular2/src/router/router_outlet"),j=require("angular2/src/router/router_link"),S=require("angular2/src/router/route_registry"),C=require("angular2/src/router/location"),R=require("angular2/angular2"),P=require("angular2/src/facade/lang"),O=require("angular2/src/facade/exceptions");return e.ROUTER_PRIMARY_COMPONENT=P.CONST_EXPR(new R.OpaqueToken("RouterPrimaryComponent")),e.ROUTER_DIRECTIVES=P.CONST_EXPR([w.RouterOutlet,j.RouterLink]),e.ROUTER_PROVIDERS=P.CONST_EXPR([S.RouteRegistry,P.CONST_EXPR(new R.Provider(_.LocationStrategy,{useClass:b.PathLocationStrategy})),C.Location,P.CONST_EXPR(new R.Provider(x.Router,{useFactory:n,deps:P.CONST_EXPR([S.RouteRegistry,C.Location,e.ROUTER_PRIMARY_COMPONENT,R.ApplicationRef])})),P.CONST_EXPR(new R.Provider(e.ROUTER_PRIMARY_COMPONENT,{useFactory:i,deps:P.CONST_EXPR([R.ApplicationRef])}))]),e.ROUTER_BINDINGS=e.ROUTER_PROVIDERS,o.define=s,t.exports});
//# sourceMappingURL=router.min.js.map